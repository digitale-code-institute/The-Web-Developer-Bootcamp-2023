<p>Before you proceed with the upcoming 'Using Mongo For Our Session Store' video lecture for the YelpCamp app project, please be aware that the <strong>connect-mongo</strong> module we use there has been updated since the recording of that lecture. As a result, some of the code in the app.js file needs to be adjusted, so be sure to keep this lecture note handy <strong>while following the next video</strong> (it will make sense then!)</p><p>Basically, you might see the following error message when implementing the mentioned connect-mongo module in your app if you are coding along while watching the upcoming lecture: <code>TypeError: Class constructor MongoStore cannot be invoked without 'new'</code></p><h4><strong>Here are two options to fix this:</strong></h4><h4><strong>1.</strong> Install the same version (v3.2.0) as used by Colt in the lecture, which allows you to follow the video lecture code without any changes</h4><p>To install and use the older version of connect-mongo  in the terminal, in main project folder, you can run the <em>npm install</em> command with this syntax to install the connect-mongo version 3.2.0 specifically:</p><p><code>npm install connect-mongo@3.2.0</code></p><h4><strong>2.</strong> Install the latest version of connect-mongo and then update the app.js code accordingly</h4><p>First, install the latest version of the connect-mongo module with this <em>npm install</em> command:</p><p><code>npm install connect-mongo@latest</code></p><p>Based on the updated documentation for the latest connect-mongo version currently, I&nbsp;found that we have to make the following changes in the <strong>app.js</strong> code (instead of the old connect-mongo v3.2.0 configuration lines):</p><p>- First, we require MongoStore differently:</p><pre class="prettyprint linenums">const session = require('express-session');
const MongoStore = require('connect-mongo');</pre><p><em>* Make sure that you don't repeat the 'const session' declaration</em><strong><em> </em></strong><em>line twice in your code, </em><a href="https://github.com/Colt/YelpCamp/blob/3ef5c4ca6aae9243b28167db3c3fb0665c3ea46a/app.js#L9" rel="noopener noreferrer" target="_blank"><em>it should be already present if you are following Colt's code</em></a><em>.</em></p><p><em>* Make sure to </em><strong><em>remove</em></strong><em> the old 'const MongoDBStore' line present in Colt's code if you are using the updated connect-mongo version  </em><a href="https://github.com/Colt/YelpCamp/blob/3ef5c4ca6aae9243b28167db3c3fb0665c3ea46a/app.js#L22" rel="noopener noreferrer" target="_blank"><em>check this link</em></a><em> to find the highlighted line that you should </em><strong><em>not</em></strong><em> use anymore with the newest versions of connect-mongo.</em></p><p>- Then, with the latest connect-mongo version, we should use the <strong>MongoStore.create()</strong> method to create the store (which has some differences in this new version, like specifying the <strong>mongoUrl</strong> property, and the <strong>crypto</strong>/<strong>secret</strong> properties):</p><pre class="prettyprint linenums">const store = MongoStore.create({
    mongoUrl: dbUrl,
    touchAfter: 24 * 60 * 60,
    crypto: {
        secret: 'thisshouldbeabettersecret!'
    }
});</pre><p>After making those changes, things should work correctly with the latest connect-mongo version too! If you see any errors while visiting the app pages after implementing this, then try to clear your <em>localhost</em> domain session data/cookies in the browser (clear them just for <em>localhost</em>, you do not need to delete them for your other websites), or try to access your app from a private/incognito browser window after modifying this session configuration.</p><p>If you need any further help with this, please reach out to the course Q&amp;A&nbsp;boards.</p><p>Zarko  <em>Teaching Assistant</em> </p>